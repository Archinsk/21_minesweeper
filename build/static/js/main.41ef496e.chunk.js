(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{13:function(e,t,s){"use strict";s.r(t);var n=s(2),c=s(3),i=s(5),r=s(4),a=s(1),l=s.n(a),o=s(7),d=s.n(o),j=s(0),p=function(e){Object(i.a)(s,e);var t=Object(r.a)(s);function s(){return Object(n.a)(this,s),t.apply(this,arguments)}return Object(c.a)(s,[{key:"render",value:function(){var e=this,t="btn cell-closed btn-block btn-sm cell p-0",s="";if(this.props.cellState.isFlag&&(s="\ud83d\udea9"),this.props.cellState.isOpen)switch(0!==this.props.cellState.value&&(s=this.props.cellState.value),this.props.cellState.value){case"\ud83d\udca3":this.props.cellState.isDetonated&&(t="btn cell-mined btn-block btn-sm cell p-0");break;case 0:t="btn cell-clean btn-block btn-sm cell p-0";break;case 1:t="btn cell-danger danger-1 btn-block btn-sm cell p-0";break;case 2:t="btn cell-danger danger-2 btn-block btn-sm cell p-0";break;case 3:t="btn cell-danger danger-3 btn-block btn-sm cell p-0";break;default:t="btn cell-danger danger-4 btn-block btn-sm cell p-0"}return Object(j.jsx)("button",{className:t,type:"button",onClick:function(){return e.props.leftClick(e.props.cellState.x,e.props.cellState.y)},onContextMenu:function(t){return e.props.rightClick(t,e.props.cellState.x,e.props.cellState.y)},children:Object(j.jsx)("div",{className:"content",children:s})})}}]),s}(l.a.Component),h=function(e){Object(i.a)(s,e);var t=Object(r.a)(s);function s(){return Object(n.a)(this,s),t.apply(this,arguments)}return Object(c.a)(s,[{key:"render",value:function(){var e=this,t=this.props.arr,s=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15].map((function(s){return Object(j.jsx)("div",{className:"col p-0",children:Object(j.jsx)(p,{cellState:t[s],leftClick:e.props.leftClick,rightClick:e.props.rightClick},s)})}));return Object(j.jsxs)("div",{className:"row mx-0",children:[Object(j.jsx)("div",{className:"col",children:Object(j.jsxs)("div",{className:"row",children:[s[0],s[1],s[2],s[3]]})}),Object(j.jsx)("div",{className:"col",children:Object(j.jsxs)("div",{className:"row",children:[s[4],s[5],s[6],s[7]]})}),Object(j.jsx)("div",{className:"col",children:Object(j.jsxs)("div",{className:"row",children:[s[8],s[9],s[10],s[11]]})}),Object(j.jsx)("div",{className:"col",children:Object(j.jsxs)("div",{className:"row",children:[s[12],s[13],s[14],s[15]]})})]})}}]),s}(l.a.Component);var b=function(e){var t=("You "+e.res+"!").toUpperCase(),s="";return"Win"===e.res&&(s=Object(j.jsxs)("div",{className:"score glow text-white text-center",children:["Score: ",e.score]})),Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{className:"glow text-white text-center",children:t}),s]})},u=function(e){Object(i.a)(s,e);var t=Object(r.a)(s);function s(e){var c;return Object(n.a)(this,s),(c=t.call(this,e)).handleChange=function(e){c.setState({value:e.target.value})},c.handleClick=function(){var e=c.state.value,t="player="+c.state.value+"&score="+c.props.score;console.log("\u0422\u0435\u043a\u0441\u0442 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u0432 handleClick - "+t),c.props.recordTop("createRecord.php",t),c.props.table(e)},c.state={value:""},c}return Object(c.a)(s,[{key:"render",value:function(){return Object(j.jsx)("div",{children:Object(j.jsx)("form",{className:"recordName",children:Object(j.jsxs)("fieldset",{children:[Object(j.jsx)("legend",{className:"text-white text-center",children:"You are in top 10!"}),Object(j.jsxs)("div",{className:"form-row",children:[Object(j.jsx)("div",{className:"col-10",children:Object(j.jsx)("input",{type:"text",className:"form-control",id:"nameRecord",placeholder:"Enter your name",value:this.state.value,onChange:this.handleChange,required:!0})}),Object(j.jsx)("div",{className:"col-2",children:Object(j.jsx)("button",{type:"button",className:"btn btn-block btn-sm btn-primary p-0",onClick:this.handleClick,children:Object(j.jsx)("span",{className:"material-icons",children:"arrow_forward"})})})]})]})})})}}]),s}(l.a.Component);var O=function(e){return e.topTen?Object(j.jsxs)("div",{children:[Object(j.jsx)("h4",{className:"text-white text-center",children:"Top 10 score"}),Object(j.jsxs)("table",{className:"table table-bordered table-sm table-hover",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{scope:"col",children:"#"}),Object(j.jsx)("th",{scope:"col",children:"Name"}),Object(j.jsx)("th",{scope:"col",children:"Score"})]})}),Object(j.jsxs)("tbody",{children:[Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"1"}),Object(j.jsx)("td",{children:e.topTen[0].player}),Object(j.jsx)("td",{children:e.topTen[0].score})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"2"}),Object(j.jsx)("td",{children:e.topTen[1].player}),Object(j.jsx)("td",{children:e.topTen[1].score})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"3"}),Object(j.jsx)("td",{children:e.topTen[2].player}),Object(j.jsx)("td",{children:e.topTen[2].score})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"4"}),Object(j.jsx)("td",{children:e.topTen[3].player}),Object(j.jsx)("td",{children:e.topTen[3].score})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"5"}),Object(j.jsx)("td",{children:e.topTen[4].player}),Object(j.jsx)("td",{children:e.topTen[4].score})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"6"}),Object(j.jsx)("td",{children:e.topTen[5].player}),Object(j.jsx)("td",{children:e.topTen[5].score})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"7"}),Object(j.jsx)("td",{children:e.topTen[6].player}),Object(j.jsx)("td",{children:e.topTen[6].score})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"8"}),Object(j.jsx)("td",{children:e.topTen[7].player}),Object(j.jsx)("td",{children:e.topTen[7].score})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"9"}),Object(j.jsx)("td",{children:e.topTen[8].player}),Object(j.jsx)("td",{children:e.topTen[8].score})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"10"}),Object(j.jsx)("td",{children:e.topTen[9].player}),Object(j.jsx)("td",{children:e.topTen[9].score})]})]})]})]}):Object(j.jsxs)("div",{children:[Object(j.jsx)("h4",{className:"text-white text-center",children:"Top 10 score"}),Object(j.jsxs)("table",{className:"table table-bordered table-sm table-hover",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{scope:"col",children:"#"}),Object(j.jsx)("th",{scope:"col",children:"Name"}),Object(j.jsx)("th",{scope:"col",children:"Score"})]})}),Object(j.jsxs)("tbody",{children:[Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"1"}),Object(j.jsx)("td",{children:"one"}),Object(j.jsx)("td",{children:"10"})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"2"}),Object(j.jsx)("td",{children:"two"}),Object(j.jsx)("td",{children:"20"})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"3"}),Object(j.jsx)("td",{children:"three"}),Object(j.jsx)("td",{children:"30"})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"4"}),Object(j.jsx)("td",{children:"four"}),Object(j.jsx)("td",{children:"40"})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"5"}),Object(j.jsx)("td",{children:"five"}),Object(j.jsx)("td",{children:"50"})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"6"}),Object(j.jsx)("td",{children:"six"}),Object(j.jsx)("td",{children:"60"})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"7"}),Object(j.jsx)("td",{children:"seven"}),Object(j.jsx)("td",{children:"70"})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"8"}),Object(j.jsx)("td",{children:"eight"}),Object(j.jsx)("td",{children:"80"})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"9"}),Object(j.jsx)("td",{children:"nine"}),Object(j.jsx)("td",{children:"90"})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"10"}),Object(j.jsx)("td",{children:"ten"}),Object(j.jsx)("td",{children:"99"})]})]})]})]})},x=function(e){Object(i.a)(s,e);var t=Object(r.a)(s);function s(e){var c;return Object(n.a)(this,s),(c=t.call(this,e)).showTable=function(e){var t=c.props.score;console.log("\u041e\u0447\u043a\u0438 \u0432 showTable = "+t);var s=c.props.topTen;console.log("topArr = "+s),console.log("topArr[9] = "+s[9]),console.log("topArr[9].score = "+s[9].score),console.log("\u041e\u0447\u043a\u0438 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0433\u043e = "+s[9].score),s[9].player=e,s[9].score=t,s.sort((function(e,t){return t.score-e.score})),c.setState({isVisibleForm:!1,isVisibleTable:!0,topTen:s}),console.log("\u0421\u043a\u0440\u044b\u0432\u0430\u0435\u043c \u0444\u043e\u0440\u043c\u0443")},c.state={isVisibleResult:!0,isVisibleForm:!1,isVisibleTable:!1,topTen:c.props.topTen},c}return Object(c.a)(s,[{key:"render",value:function(){var e,t=this;console.log("\u0420\u0435\u043d\u0434\u0435\u0440 GameStatus");var s=this.props.topTen,n=this.props.score;return"Win"===this.props.res&&this.state.isVisibleResult&&(this.props.readTop("readRecord.php",""),s&&n>s[9].score&&(this.timerID=setTimeout((function(){return t.hiddenResult()}),5e3))),this.state.isVisibleResult&&(e=Object(j.jsx)(b,{res:this.props.res,score:this.props.score,readTop:this.props.readTop})),this.state.isVisibleForm&&(e=Object(j.jsx)(u,{isRecord:"true",recordTop:this.props.recordTop,score:this.props.score,table:this.showTable})),this.state.isVisibleTable&&(e=Object(j.jsx)(O,{topTen:this.state.topTen})),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"resultBack"}),Object(j.jsx)("div",{className:"result",children:e})]})}},{key:"hiddenResult",value:function(){this.setState({isVisibleResult:!1,isVisibleForm:!0}),console.log("\u0421\u043a\u0440\u044b\u0432\u0430\u0435\u043c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442")}}]),s}(l.a.Component),m=function(e){Object(i.a)(s,e);var t=Object(r.a)(s);function s(){return Object(n.a)(this,s),t.apply(this,arguments)}return Object(c.a)(s,[{key:"render",value:function(){var e=this;console.log("\u0420\u0435\u043d\u0434\u0435\u0440 \u0438\u0433\u0440\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u043b\u044f");var t,s=null,n=this.props.fields;if(n){var c=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15].map((function(t){return Object(j.jsx)(h,{arr:n[t],leftClick:e.props.leftClick,rightClick:e.props.rightClick},t)}));s=Object(j.jsx)(j.Fragment,{children:c})}return t=this.props.res?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("p",{children:s}),Object(j.jsx)(x,{res:this.props.res,score:this.props.score,recordTop:this.props.recordTop,readTop:this.props.readTop,topTen:this.props.topTen})]}):Object(j.jsx)("p",{children:s}),Object(j.jsx)("div",{className:"gamefield",children:t})}}]),s}(l.a.Component),g=function(e){Object(i.a)(s,e);var t=Object(r.a)(s);function s(){return Object(n.a)(this,s),t.apply(this,arguments)}return Object(c.a)(s,[{key:"render",value:function(){return Object(j.jsx)("div",{className:"col-4 col-sm-2 pb-2",children:Object(j.jsxs)("div",{className:"input-group",children:[Object(j.jsx)("div",{className:"input-group-prepend",children:Object(j.jsx)("div",{className:"input-group-text px-2",children:"\ud83d\udea9"})}),Object(j.jsx)("input",{type:"text",className:"form-control text-center px-2",value:this.props.flags})]})})}}]),s}(l.a.Component),v=function(e){Object(i.a)(s,e);var t=Object(r.a)(s);function s(){return Object(n.a)(this,s),t.apply(this,arguments)}return Object(c.a)(s,[{key:"render",value:function(){return Object(j.jsx)("div",{className:"col-4 col-sm-2 pb-2",children:Object(j.jsxs)("div",{className:"input-group",children:[Object(j.jsx)("div",{className:"input-group-prepend",children:Object(j.jsx)("div",{className:"input-group-text px-2",children:Object(j.jsx)("span",{className:"material-icons",children:"ads_click"})})}),Object(j.jsx)("input",{type:"text",className:"form-control text-center px-2",value:this.props.steps})]})})}}]),s}(l.a.Component),f=function(e){Object(i.a)(s,e);var t=Object(r.a)(s);function s(e){var c;return Object(n.a)(this,s),(c=t.call(this,e)).state={finishDate:null,isTimerGoing:!1},c}return Object(c.a)(s,[{key:"render",value:function(){var e,t,s;return this.props.startDate&&this.state.finishDate&&this.state.finishDate>this.props.startDate?(e=this.state.finishDate-this.props.startDate,t=(Math.floor(e/1e3/60)%60).toString().padStart(2,"0"),s=(Math.floor(e/1e3)%60).toString().padStart(2,"0")):(t="00",s="00"),Object(j.jsx)("div",{className:"col-4 col-sm-2 pb-2",children:Object(j.jsx)("input",{type:"text",className:"form-control text-center",value:t+":"+s,readOnly:!0})})}},{key:"componentDidUpdate",value:function(){var e=this;console.log("\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442 \u0442\u0430\u0439\u043c\u0435\u0440\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d"),this.state.isTimerGoing||!this.props.startDate||this.props.finishDate||(console.log("\u0417\u0430\u043f\u0443\u0441\u043a \u0442\u0430\u0439\u043c\u0435\u0440\u0430"),this.timerID=setInterval((function(){return e.tick()}),1e3),this.setState((function(){return{isTimerGoing:!0}}))),this.props.finishDate&&(clearInterval(this.timerID),console.log("\u0422\u0430\u0439\u043c\u0435\u0440 \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u043b\u0441\u044f")),this.props.reboot&&this.state.isTimerGoing&&(console.log(this.props.reboot),this.setState({isTimerGoing:!1}))}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"tick",value:function(){this.setState({finishDate:Date.now()})}}]),s}(l.a.Component),T=function(e){Object(i.a)(s,e);var t=Object(r.a)(s);function s(){return Object(n.a)(this,s),t.apply(this,arguments)}return Object(c.a)(s,[{key:"render",value:function(){var e=Math.round((256-this.props.cells)/216*100),t={width:e+"%"};return Object(j.jsx)("div",{className:"col-10 col-sm-5 pb-2",children:Object(j.jsxs)("div",{className:"input-group",children:[Object(j.jsx)("div",{className:"input-group-prepend",children:Object(j.jsx)("span",{className:"input-group-text material-icons",children:"lock_open"})}),Object(j.jsx)("div",{className:"progress form-control p-0",children:Object(j.jsxs)("div",{className:"progress-bar",role:"progressbar",style:t,"aria-valuenow":e,"aria-valuemin":"0","aria-valuemax":"100",children:[e,"%"]})}),Object(j.jsx)("div",{className:"input-group-append",children:Object(j.jsx)("span",{className:"input-group-text material-icons",children:"lock"})})]})})}}]),s}(l.a.Component);var y=function(){return Object(j.jsx)("div",{className:"col-2 col-sm-1 pb-2",children:Object(j.jsx)("button",{type:"submit",className:"btn btn-block btn-sm p-0",children:Object(j.jsx)("span",{className:"material-icons",children:"autorenew"})})})},N=function(e){Object(i.a)(s,e);var t=Object(r.a)(s);function s(){return Object(n.a)(this,s),t.apply(this,arguments)}return Object(c.a)(s,[{key:"render",value:function(){return Object(j.jsx)("form",{className:"game-bar",children:Object(j.jsxs)("div",{className:"form-row pt-2 px-1 mx-0",children:[Object(j.jsx)(g,{flags:this.props.flags}),Object(j.jsx)(v,{steps:this.props.steps}),Object(j.jsx)(f,{startDate:this.props.startDate,finishDate:this.props.finishDate,reboot:this.props.reboot}),Object(j.jsx)(T,{cells:this.props.cells}),Object(j.jsx)(y,{onClick:this.props.onClick})]})})}}]),s}(l.a.Component),C=function(e){Object(i.a)(s,e);var t=Object(r.a)(s);function s(e){var c;return Object(n.a)(this,s),(c=t.call(this,e)).createGame=function(){console.log("\u0421\u043e\u0437\u0434\u0430\u044e \u0438\u0433\u0440\u0443");for(var e=[],t=0;t<16;t++)e.push(new Array(16).fill(null)),e[t][0]={x:0,y:t,value:0,isMine:!1,isFlag:!1,isOpen:!1,isDetonated:!1},e[t][1]={x:1,y:t,value:0,isMine:!1,isFlag:!1,isOpen:!1,isDetonated:!1},e[t][2]={x:2,y:t,value:0,isMine:!1,isFlag:!1,isOpen:!1,isDetonated:!1},e[t][3]={x:3,y:t,value:0,isMine:!1,isFlag:!1,isOpen:!1,isDetonated:!1},e[t][4]={x:4,y:t,value:0,isMine:!1,isFlag:!1,isOpen:!1,isDetonated:!1},e[t][5]={x:5,y:t,value:0,isMine:!1,isFlag:!1,isOpen:!1,isDetonated:!1},e[t][6]={x:6,y:t,value:0,isMine:!1,isFlag:!1,isOpen:!1,isDetonated:!1},e[t][7]={x:7,y:t,value:0,isMine:!1,isFlag:!1,isOpen:!1,isDetonated:!1},e[t][8]={x:8,y:t,value:0,isMine:!1,isFlag:!1,isOpen:!1,isDetonated:!1},e[t][9]={x:9,y:t,value:0,isMine:!1,isFlag:!1,isOpen:!1,isDetonated:!1},e[t][10]={x:10,y:t,value:0,isMine:!1,isFlag:!1,isOpen:!1,isDetonated:!1},e[t][11]={x:11,y:t,value:0,isMine:!1,isFlag:!1,isOpen:!1,isDetonated:!1},e[t][12]={x:12,y:t,value:0,isMine:!1,isFlag:!1,isOpen:!1,isDetonated:!1},e[t][13]={x:13,y:t,value:0,isMine:!1,isFlag:!1,isOpen:!1,isDetonated:!1},e[t][14]={x:14,y:t,value:0,isMine:!1,isFlag:!1,isOpen:!1,isDetonated:!1},e[t][15]={x:15,y:t,value:0,isMine:!1,isFlag:!1,isOpen:!1,isDetonated:!1};e=c.generateMines(e),e=c.countMineNeighbors(e),c.setState({gameField:e,countFlags:40,isGameStopped:!1}),c.state.gameField&&console.log("\u0421\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 gameField \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: "+c.state.gameField.map((function(e){return e.map((function(e){return e.value}))})))},c.generateMines=function(e){console.log("\u0413\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f \u043c\u0438\u043d");for(var t=0;t<40;){var s=Math.floor(16*Math.random()),n=Math.floor(16*Math.random());"\ud83d\udca3"!==e[s][n].value&&(e[s][n].value="\ud83d\udca3",e[s][n].isMine=!0,t++)}return c.setState({countMinesOnField:t}),e},c.countMineNeighbors=function(e){console.log("\u041f\u043e\u0434\u0441\u0447\u0435\u0442 \u043c\u0438\u043d \u0432\u043e\u043a\u0440\u0443\u0433");for(var t=0;t<e.length;t++)for(var s=0;s<e[t].length;s++)if(0===e[t][s].value){for(var n=c.getNeighbors(s,t,15,15),i=0,r=0;r<n.length;r++){var a=n[r].coordX;"\ud83d\udca3"===e[n[r].coordY][a].value&&i++}e[t][s].value=i}return e},c.getNeighbors=function(e,t){for(var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:15,c=[],i=e-1;i<=e+1;i++)for(var r=t-1;r<=t+1;r++)if(!(i<0||i>s)&&!(r<0||r>n)&&(i!==e||r!==t)){var a={coordX:i,coordY:r};c.push(a)}return c},c.restart=function(){console.log("\u0420\u0443\u0447\u043d\u043e\u0439 \u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u043a \u0438\u0433\u0440\u044b"),c.setState({startCell:null}),c.autoRestart()},c.autoRestart=function(){console.log("\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u043a \u0438\u0433\u0440\u044b"),c.setState({gameField:null,countMinesOnField:0,countFlags:null,countClosedTiles:256,score:0,isGameStopped:!0,autoRestartCount:0,gameStatus:null,steps:0,startDate:null,finishDate:null,topRecord:null}),c.createGame()},c.openCell=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!c.state.isGameStopped){var n=c.state.gameField[t][e];n.isFlag||n.isOpen||c.setState((function(e){return{steps:e.steps+1}})),c.state.startDate||c.setState({startDate:Date.now()}),c.openTile(e,t,s)}},c.openTile=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!c.state.isGameStopped){var n=c.state.gameField,i=n[t][e],r=c.state.countClosedTiles;if(console.log("\u041e\u0442\u043a\u0440\u044b\u0442\u0438\u0435 \u044f\u0447\u0435\u0439\u043a\u0438 "+i.x+" - "+i.y),console.log("\u0417\u0430\u043a\u0440\u044b\u0442\u044b\u0445 \u044f\u0447\u0435\u0435\u043a - "+r+", \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u044f\u0447\u0435\u0439\u043a\u0438 - "+i.value),256!==r||0===i.value||s){if(c.setState({startCell:null}),console.log("\u0423\u0436\u0435 \u043d\u0435 \u043f\u0435\u0440\u0432\u0430\u044f \u044f\u0447\u0435\u0439\u043a\u0430"),!i.isFlag&&!i.isOpen)if(i.isMine)console.log("\u0417\u0434\u0435\u0441\u044c \u043c\u0438\u043d\u0430"),i.isOpen=!0,i.isDetonated=!0,c.gameOver();else if(0===i.value){console.log("\u0417\u0430\u043a\u0440\u044b\u0442\u0430\u044f \u043d\u0443\u043b\u0435\u0432\u0430\u044f \u044f\u0447\u0435\u0439\u043a\u0430"),i.isOpen=!0,r--;for(var a=c.getNeighbors(i.x,i.y),l=0;l<a.length;l++)n[a[l].coordY][a[l].coordX].isOpen||c.openTile(a[l].coordX,a[l].coordY,!0);c.setState((function(e){return{gameField:n,countClosedTiles:e.countClosedTiles-1}}))}else console.log("\u0417\u0430\u043a\u0440\u044b\u0442\u0430\u044f \u043d\u0435\u043d\u0443\u043b\u0435\u0432\u0430\u044f \u044f\u0447\u0435\u0439\u043a\u0430"),i.isOpen=!0,r--,c.setState((function(e){return{gameField:n,countClosedTiles:e.countClosedTiles-1}}))}else console.log("\u041f\u0435\u0440\u0432\u0430\u044f \u043d\u0435\u043d\u0443\u043b\u0435\u0432\u0430\u044f \u044f\u0447\u0435\u0439\u043a\u0430"),c.setState({startCell:{x:e,y:t}}),c.autoRestart()}},c.gameOver=function(){for(var e=c.state.gameField,t=0;t<e.length;t++)for(var s=0;s<e[t].length;s++){var n=e[t][s];n.isMine&&!n.isOpen&&(n.isOpen=!0)}c.setState({isGameStopped:!0,gameResult:"Lose",gameField:e,finishDate:Date.now()})},c.countScore=function(){var e=Math.floor((c.state.finishDate-c.state.startDate)/1e3),t=c.state.steps,s=640,n=1;switch(!0){case e<=30:s+=30-e;case e<=60:s+=60-e;case e<=90:s+=90-e;case e<=120:s+=120-e;case e<=150:s+=150-e;case e<180:s+=180-e;break;case e>360:s=10;break;case e>=330:s-=e-330;case e>=300:s-=e-300;case e>=270:s-=e-270;case e>=240:s-=e-240;case e>=210:s-=e-210;case e>180:s-=e-180;break;default:s=640}if(t>150)n=.1;else if(t>75){n-=.012*(t-75)}if(t<75){n+=.024*(75-t)}c.setState({score:Math.round(s*n)}),console.log("\u0412\u0440\u0435\u043c\u044f -"+e+", \u043a\u043b\u0438\u043a\u043e\u0432 - "+t)},c.gameWin=function(){for(var e=c.state.gameField,t=0;t<e.length;t++)for(var s=0;s<e[t].length;s++){var n=e[t][s];n.isMine&&!n.isFlag&&(n.isFlag=!0)}c.setState({isGameStopped:!0,gameResult:"Win",finishDate:Date.now()})},c.toggleFlag=function(e,t,s){if(e.preventDefault(),console.log("\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u0444\u043b\u0430\u0433\u0430"),!c.state.isGameStopped&&256!==c.state.countClosedTiles){var n=c.state.gameField,i=n[s][t],r=c.state.countFlags;i.isOpen||(i.isFlag?(i.isFlag=!i.isFlag,r++):r>0&&(i.isFlag=!i.isFlag,r--)),c.setState({gameField:n,countFlags:r})}},c.topTenRecordToState=function(e){c.setState({topTen:e})},c.ajaxReadRecord=function(e,t){var s,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.topTenRecordToState,i=new XMLHttpRequest;i.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var e=JSON.parse('{"obj":['+this.responseText+"]}");s=e.obj,console.log("topArray = "+s),n(s)}},i.open("POST",e,!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send(t)},c.ajaxCreateRecord=function(e,t,s){var n=new XMLHttpRequest;console.log("\u0412 Ajax-\u0437\u0430\u043f\u0440\u043e\u0441\u0435 \u0442\u0435\u043a\u0441\u0442 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 = "+t),n.onreadystatechange=function(){4==this.readyState&&200==this.status&&console.log(this.responseText)},n.open("POST",e,!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send(t)},console.log("\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f"),c.state={gameField:null,countMinesOnField:0,countFlags:null,countClosedTiles:256,score:0,isGameStopped:!0,autoRestartCount:0,gameResult:null,startCell:null,steps:0,startDate:null,finishDate:null,topTen:null},c}return Object(c.a)(s,[{key:"render",value:function(){return this.state.gameField&&console.log("\u041f\u0440\u0438 \u0440\u0435\u043d\u0434\u0435\u0440\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u0438\u0433\u0440\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u043b\u044f: "+this.state.gameField.map((function(e){return e.map((function(e){return e.value}))}))),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h2",{className:"text-white text-center",children:"Minesweeper"}),Object(j.jsx)(N,{flags:this.state.countFlags,steps:this.state.steps,startDate:this.state.startDate,finishDate:this.state.finishDate,reboot:256===this.state.countClosedTiles,cells:this.state.countClosedTiles,onClick:this.restart}),Object(j.jsx)(m,{fields:this.state.gameField,leftClick:this.openCell,rightClick:this.toggleFlag,res:this.state.gameResult,score:this.state.score,recordTop:this.ajaxCreateRecord,readTop:this.ajaxReadRecord,topTen:this.state.topTen})]})}},{key:"componentDidMount",value:function(){console.log("\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0441\u043c\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d"),this.createGame()}},{key:"componentDidUpdate",value:function(){console.log("\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d"),this.state.startCell&&this.openCell(this.state.startCell.x,this.state.startCell.y),40!==this.state.countClosedTiles||this.state.gameResult||this.gameWin(),"Win"===this.state.gameResult&&0===this.state.score&&this.countScore()}}]),s}(l.a.Component);d.a.render(Object(j.jsx)(C,{}),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.41ef496e.chunk.js.map